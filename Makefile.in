# $Id: Makefile.in,v 1.7 2000/12/09 22:52:42 dan_karrels Exp $
# all		-- gnuworld
# clean		-- cleanup objects and executable
# distclean	-- everything =P

# Standard defines
CXX = @CXX@
DEFS = @DEFS@

BIN_PATH = @BIN_PATH@
LIB_PATH = @LIB_PATH@
MOD_DIRS = @MOD_DIRS@

RM = @RM@
CP = @CP@
MV = @MV@
LN = @LN@

############ You shouldn't change anything below this line ###################

SHELL = /bin/sh

all: libgnuworld gnuworld modules
everything: all

libgnuworld: lib/Makefile
	@cd lib; $(MAKE) all

gnuworld: src/Makefile Makefile libgnuworld modules
	@cd src; $(MAKE) all

modules:
	@for i in $(MOD_DIRS); do \
		echo "Building module: $$i"; \
		cd $$i; $(MAKE) all; cd ..; \
	done;

clean:
	@-if [ -f lib/Makefile ]; then cd lib; $(MAKE) clean; fi
	@-if [ -f src/Makefile ]; then cd src; $(MAKE) clean; fi
	@for i in $(MOD_DIRS); do \
		cd $$i; $(MAKE) clean; cd ..; \
	done;

distclean cleandir realclean:
	$(RM) config.status config.cache
	$(RM) config.log include/defs.h
	@cd lib; $(MAKE) distclean
	@cd src; $(MAKE) distclean
	@for i in $(MOD_DIRS); do \
		cd $$i; $(MAKE) distclean; cd ..; \
		$(RM) $$i/Makefile; \
	done;
	$(RM) src/Makefile lib/Makefile
	$(RM) Makefile

depend:
	@echo
	@echo "Building dependencies, this may take a moment..."
	@echo
	@cd lib; $(MAKE) depend
	@cd src; $(MAKE) depend
	@for i in $(MOD_DIRS); do \
		cd $$i; $(MAKE) depend; cd ..; \
	done;
	@echo
	@echo "Finished building dependencies"
	@echo
